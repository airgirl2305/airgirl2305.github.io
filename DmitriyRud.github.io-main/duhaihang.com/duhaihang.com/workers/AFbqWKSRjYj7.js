!function(){var l=self,d={},o=new function(){var n=null,a=null;function r(){n&&(n.abort(),a=n=null)}return{load:function(e,t){n&&r(),a=t,(n=new XMLHttpRequest).responseType="arraybuffer",n.open("GET",e,!0),n.onload=function(){a&&a(n.response),a=n=null},n.send()},abort:r}};function f(e,t){l.postMessage({event:t,id:e.name,cache:e.cache,count:e.count,size:e.size,result:e.result})}function b(e,t,n){var a=e,r=(n=n||"",0),o=0,s=function(e){if(!e||!/\_/.test(e))return r=0,console.error("unpacker: Invalid key"),null;var t=e.split("_"),n=a.slice(parseInt(t[0]),parseInt(t[1]));r=parseInt(t[2]),o=t[3],0==r&&console.error("unpacker: It might be an emptry binary");return JSON.parse(i(n))}(t),c=null!=s?function(){var e=s.length,t={};for(;0<e--;){var n=s[e],a=n[0];"1x1"!=a&&(t[a]={begin:n[1],end:n[2],mimeType:n[3]})}return t}():null;function u(e){var t=c[e];return t||console.warn(e+" doesn't exist"),a.slice(t.begin,t.end)}function i(e){if(l.TextDecoder)return(new TextDecoder).decode(e);for(var t=new l.Uint8Array(e),n="",a=Math.pow(2,8)-1,r=Math.ceil(t.byteLength/a),o=0,s=0;s<r;s++)n+=String.fromCharCode.apply(null,new l.Uint8Array(t.buffer.slice(o,o+a))),o+=a;return n}return{name:n,cache:c,count:r,size:o,destroy:function(){s=a=c=null},get:function(e,t){if(0==r)return"";var n;switch(t){case"obj":case"css":case"svg":case"txt":case"text":return i(n=u(e));case"gltf":case"json":return n=u(e),JSON.parse(i(n));case"base64":return n=u(e),"data:"+c[e].mimeType+";base64,"+function(e){for(var t="",n=new l.Uint8Array(e),a=n.byteLength,r=0;r<a;r++)t+=String.fromCharCode(n[r]);return l.btoa(t)}(n);case"uri":case"blob":case"image":case"audio":case"video":return n=u(e),l.URL.createObjectURL(new l.Blob([n],{type:c[e].mimeType}));case"bin":case"glb":case"dds":case"pvr":case"bytes":default:return u(e)}}}}l.addEventListener("message",function(e){switch(e.data.event){case"load":case"mount":var a=e.data.id,l=e.data.key,t=!1;if(!l)return d[a]={name:a,cache:null,size:0,count:0,ready:!0,result:{}},void f(d[a],"load"==e.data.event?"loaded":"mounted");if(d[a]&&d[a].ready&&(t=!0),t)f(d[a],"load"==e.data.event?"loaded":"mounted");else{function n(e,t){var r,o,s,c,u,i,n=new b(e,l,a);0==n.count?(n.ready=!0,n.result={},f(n,t)):(n.ready=!1,d[a]=n,o=function(e){n.ready=!0,n.result=e,f(n,t)},s=(r=n).name,c=Object.keys(r.cache),i={},function e(t){var n=s+"/"+t,a=function(e){var t=function(e){return e.match(/\.([0-9a-z]+)(?=[?#])|(\.)(?:[\w]+)$/gim)[0].replace(/\./,"").toLowerCase()}(e),n="text";return/(json|gltf)$/gi.test(t)&&(n="json"),/(mp4|webm)$/gi.test(t)&&(n="video"),/(mp3|m4a|wav)$/gi.test(t)&&(n="audio"),/(jpg|png|gif|webp)$/gi.test(t)&&(n="image"),/(glb|bin|dds|pvr)$/gi.test(t)&&(n="bytes"),n}(n);i[n]=r.get(n.replace(s+"/",""),a),++u<c.length?e(c[u]):o(i)}(c[u=0]))}if("load"==e.data.event){var r=e.data.url;o.load(r,function(e){n(e,"loaded")})}else{n(e.data.arraybuffer,"mounted")}}break;case"abort":a=e.data.id;d[a]&&(d[a].destroy(),d[a]=null,delete d[a]),o.abort()}},!1)}();