import{r as C}from"./chunks/chunk.38eb47a4.js";import{j as f}from"./chunks/chunk.4f3616bf.js";function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S(r,!0).forEach(function(n){W(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){if(e==null)return{};var r=U(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function U(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var H=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.hasAlpha,r=e.maxColors,n=e.minDensity,o=e.cubicCells,a=e.mean,d=e.order,b=R(e,["hasAlpha","maxColors","minDensity","cubicCells","mean","order"]);if(typeof t!="boolean")throw new Error("options.hasAlpha is required");var c=I({hasAlpha:t,maxColors:Math.min(Math.max(1,r),32)||10,minDensity:Math.min(Math.max(.001,n),1)||.005,cubicCells:Math.min(Math.max(3,o),4)||4,mean:a!==!1,order:d==="density"?d:"distance"},b);return c},T=function(e,t){var r=t.hasAlpha,n=t.maxColors,o=t.minDensity,a=t.cubicCells,d=t.mean,b=t.order,c=t.applyColor,h=t.colorPlacer,s,u,y,g,v=new Array(a),x=new Array(Math.pow(a,3));for(s=0,g=0;s<a;s++)for(v[s]=new Array(a),u=0;u<a;u++)for(v[s][u]=new Array(a),y=0;y<a;y++,g++)v[s][u][y]=x[g]=[];var O=r?4:3,p,i,N=Math.floor(e.length/O);for(p=0,g=0;g<N;p+=O,g++){i={rgb:[e[p],e[p+1],e[p+2]],alpha:r?e[p+3]:255},c&&c(i),i.xyz=h(i),i.distance=$(i);var M=q(i.xyz,a);v[M[0]][M[1]][M[2]].push(i)}x.sort(function(l,m){return l.length>m.length?-1:l.length<m.length?1:0});var w=x.map(function(l){return{density:l.length/N,colors:l}});w=w.filter(function(l){return l.density>=o}),w.length>n&&(w=w.slice(0,n));var E=w.map(function(l){if(d){var m=l.colors.reduce(function(j,P){return j.r+=P.rgb[0],j.g+=P.rgb[1],j.b+=P.rgb[2],j},{r:0,g:0,b:0}),A=l.colors.length;i={rgb:[Math.min(255,Math.round(m.r/A)),Math.min(255,Math.round(m.g/A)),Math.min(255,Math.round(m.b/A))],alpha:l.colors[0].alpha},c&&c(i),i.xyz=h(i)}else{var k=l.colors.sort(function(j,P){return j.distance>P.distance?-1:j.distance<P.distance?1:0});i=k[Math.floor(l.colors.length/2)]}return i.hex=z(i.rgb[0],i.rgb[1],i.rgb[2]),i.density=l.density,i.distance=$(i),i});return b==="distance"&&(E=E.sort(function(l,m){return l.distance>m.distance?-1:l.distance<m.distance?1:0})),E};function q(e,t){return[Math.max(0,Math.ceil(Math.min(e[0],1)*t)-1),Math.max(0,Math.ceil(Math.min(e[1],1)*t)-1),Math.max(0,Math.ceil(Math.min(e[2],1)*t)-1)]}function L(e){var t=e.toString(16);return t.length===1?"0"+t:t}function z(e,t,r){return"#"+L(e)+L(t)+L(r)}function $(e){return e.distance=e.xyz[0]+e.xyz[1]*10+e.xyz[2]*100}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D(r,!0).forEach(function(n){F(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e,t){if(e==null)return{};var r=X(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function X(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var Y=H,B=T,G=function(e,t){var r=t.colorPlacer,n=K(t,["colorPlacer"]),o=_({colorPlacer:r||J},Y(n));return B(e,o)};function J(e){return[e.rgb[0]/256,e.rgb[1]/256,e.rgb[2]/256]}var Q=(e,{srcUrl:t,width:r,height:n,imageEl:o,canvasEl:a,inputEl:d,onProcess:b,...c},h)=>{n||(r=r||100);const s=o||new Image,u=a||document.createElement("canvas"),y=u.getContext("2d"),g=()=>{if(r){const i=s.naturalHeight/s.naturalWidth;u.width=r,u.height=Math.round(r*i)}else{const i=s.naturalWidth/s.naturalHeight;u.height=n,u.width=Math.round(n*i)}y.drawImage(s,0,0,u.width,u.height);const O=y.getImageData(0,0,u.width,u.height);typeof b=="function"&&b();const p=e(O.data,{hasAlpha:!0,...c});h(null,p)},v=(O,p)=>h(p);s.addEventListener("load",g,!1),s.addEventListener("error",v,!1),t&&(s.crossOrigin="Anonymous",s.src=t);let x;return d&&(x=O=>{const p=new FileReader;p.onload=i=>{s.src=i.target.result},p.readAsDataURL(O.target.files[0])},d.addEventListener("change",x,!1)),s.complete&&s.naturalWidth&&s.naturalHeight&&g(),{unregister:()=>{s.removeEventListener("load",g,!1),s.removeEventListener("error",v,!1),x&&d.removeEventListener("change",x,!1)}}};const V=G,Z=Q;var ee=(e,t)=>{Z(V,e,t)};function ne(){const e=C.exports.useRef(null),[t,r]=C.exports.useState("/winter-building.jpg"),[n,o]=C.exports.useState([]),[a,d]=C.exports.useState(0),b=n?.[a]?.distance>50;return C.exports.useEffect(()=>{const c=new Image;c.src=t,c.onload=function(){ee({srcUrl:t,mean:!1,maxColors:20,minDensity:.001,cubicCells:27},(h,s)=>{o(s)})}},[t]),f.exports.jsxs("article",{className:`${b?"default-scheme":"alt-scheme"} w-full text-contrast mb-12 p-8 rounded-xl relative grid transition-colors min-w-[320px]`,style:{backgroundColor:n[a]?.hex,gridTemplateRows:"auto 1fr auto"},children:[f.exports.jsx("p",{className:"text-center font-serif text-xl pb-4",children:"Image Color Extraction"}),f.exports.jsxs("figure",{className:"relative image-color-figure aspect-square overflow-hidden rounded-md",children:[f.exports.jsxs("label",{htmlFor:"file-upload-color",className:"block h-full cursor-pointer",children:[t&&f.exports.jsx("img",{src:t,width:"1000",height:"1000",alt:"Image uploaded by a user",className:"object-cover object-top aspect-square"}),f.exports.jsx("input",{id:"file-upload-color",name:"file-upload",className:"hidden",type:"file",ref:e,onChange:c=>{r(URL.createObjectURL(c.target.files[0]))}})]}),f.exports.jsxs("figcaption",{style:{background:"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,.5))",bottom:"0px",color:"white"},className:"p-4 absolute w-full text-center font-serif text-sm grid",children:["Click image upload your own or",f.exports.jsx("button",{className:"font-bold underline cursor-pointer",onClick:()=>r(`https://source.unsplash.com/random/${Math.floor(Math.random()*100)}`),children:"Try Random"})]})]}),f.exports.jsx("div",{className:"flex pt-4 items-center gap-4 overflow-auto scroll-px-1",children:n.map((c,h)=>f.exports.jsx("div",{className:`transition-colors bg-[rgba(255,255,255,.2)] p-2 rounded-lg flex place-items-center ${h===a?"bg-[rgba(255,255,255,.6)]":""}`,children:f.exports.jsx("button",{onClick:()=>d(h),className:"w-[32px] h-[32px] rounded-full shadow-md shadow-current shrink-0",style:{backgroundColor:c.hex}})},h))}),f.exports.jsxs("div",{className:"flex items-center justify-between text-xs mt-4",children:[f.exports.jsx("span",{className:"font-thin",children:"Lighter"}),f.exports.jsx("span",{className:"font-bold",children:"Darker"})]})]})}export{ne as default};
